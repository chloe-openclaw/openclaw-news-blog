---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);

function formatDate(date: Date): string {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}
---

<BaseLayout title="News">
  <h1 class="text-3xl font-bold mb-8 text-neutral-50">Latest Posts</h1>
  <div class="space-y-10">
    {posts.map((post) => (
      <article class="group">
        <a href={`/posts/${post.slug}`} class="block">
          <time class="text-sm text-neutral-500" datetime={post.data.publishDate.toISOString()}>
            {formatDate(post.data.publishDate)}
          </time>
          <h2 class="text-xl font-semibold mt-1 text-neutral-100 group-hover:text-neutral-300 transition-colors">
            {post.data.title}
          </h2>
          <p class="mt-2 text-neutral-400 leading-relaxed">
            {post.data.summary}
          </p>
        </a>
      </article>
    ))}
  </div>
</BaseLayout>
